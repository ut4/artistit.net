<%# lokaalit t채ss채 tiedostossa: {
    artist: Artist;
    maxArtistNameLen: number;
    maxTaglineLen: number;
    readTemplate: (name: string): string;
    errorCode: number;
} %>
<%- include('common/layout-header', {title: 'Muokkaa artistia ' + artist.name}); %>
<form action="<%- baseUrl %>artisti/muokkaa" method="POST" class="edit-artist-view">
    <header style="<%- artist.coverPhoto
        ? `background-image:url('${staticBaseUrl}user-images/${artist.coverPhoto}')`
        : '' %>">
        <div>
            <input id="i-name" name="name" value="<%= artist.name %>" class="head-input" autofocus>
            <div class="error"></div>
        </div>
        <div>
            <textarea id="i-tagline" name="tagline" class="tagline-input"><%= artist.tagline %></textarea>
            <div class="error"></div>
        </div>
    </header>
    <section class="main">
        <input id="i-widgets" name="widgets" type="hidden">
        <div class="error"></div>
        <input name="id" value="<%- artist.id %>" type="hidden">
        <%- include('artist/widget-designer',
                    {widgets: JSON.parse(artist.widgets), readTemplate,
                     widgetsInputId: 'i-widgets'}) %>
        <%- include('common/form-buttons',
                    {submitText: 'Tallenna',
                     gotoOnCancel: 'artisti/' + artist.id}); %>
    </section>
</form>
<script>window.artistit.addPageScript(function() {
    var inputs = [document.getElementById('i-name'),
                  document.getElementById('i-tagline'),
                  document.getElementById('i-widgets')];
    //
    var validator = new window.artistit.FormValidation(inputs);
    validator.addCheckers(inputs[0], 'Nimi',
        validator.notEmpty(),
        validator.maxLen(<%- maxArtistNameLen %>));
    validator.addCheckers(inputs[1], 'Tagline',
        validator.maxLen(<%- maxTaglineLen %>));
    validator.addCheckers(inputs[2], 'Widgets',
        validator.notEmpty());
    validator.checkAll();
})</script>
<%- include('common/layout-footer', errorCode != '-1'
    ? {}
    : {toastMessage: {message: 'Tietojen p채ivitys ep채onnistui.', level: 'error'}}); %>